{
  "_id": "621dfa141b17ad02986c7d78",
  "apikey_unique": {
    "type": "Point",
    "coordinates": [
      0,
      0,
    ]
  },
  "owners": [
    {
      "_id": "5eb14f76f4e2c15ffb9bf805",
      "firstName": "Sam",
      "lastName": "Rae",
      "name": "Sam Rae",
      "_type": "user",
    }
  ],
  "managedOwners": [
    {
      "_id": "5eb14f10ff872a540dbbbe16",
      "_type": "persona",
      "firstName": "Sam",
      "title": "Sam Rae",
      "lastName": "Rae",
    }
  ],
  "status": "active",
  "hashtags": [],
  "_references": [],
  "mentions": [],
  "keywords": [
    "christian conventions of wa inc",
  ],
  "privacy": "secure",
  "triggers": [],
  "conditions": [],
  "contacts": [],
  "teams": [],
  "integrations": [],
  "items": [],
  "styles": [],
  "realms": [
    {
      "_id": "5e82a7cd281d6602b698b483",
      "title": "Christian Conventions of WA Inc",
      "color": "#7f12b3",
      "bgColor": "#e7b3ff",
      "slug": "christian-conventions-of-wa-inc",
      "_type": "realm",
    }
  ],
  "policies": [],
  "developmentMode": false,
  "tags": [],
  "actions": [
    {
      "conditions": [],
      "type": "code",
      "_id": "621dfa141b17ad02986c7d79",
      "script": "/* This Reaction is called from other Reactions to send emails. Example body input: { "fromName": "Rhianon Rae", "fromEmail": "rhianonrae@gmail.com", "toEmails": "samrae@gmail.com", "toContactIDs": ["5e97e0806a9f734dcdc940f1"], "subect": "Test email", "body": "<h3>Hi!</h3><p>Here is a test email</p>" } */ /* Validate input */ if (!input.fromName) return done('No from name supplied', 'STOP'); if (!input.fromEmail) return done('No from email address supplied', 'STOP'); if (!input.toEmails && !input.toContactIDs) return done('No contact IDs or email addresses supplied', 'STOP'); if (!input.subject) return done('No email subject supplied', 'STOP'); if (!input.body) return done('No email body supplied', 'STOP'); // Supply defaults if they're not there if (!input.toContactIDs) input.toContactIDs = null; if (!input.toEmails) input.toEmails = null; return done(null, input);",
    },
    {
      "conditions": [
        "toContactIDs",
      ],
      "type": "email",
      "_id": "621dfa141b17ad02986c7d7a",
      "data": {
        "keys": [
          "toContactIDs",
        ],
        "contacts": [],
        "teams": [],
        "emailTemplate": null,
        "senderName": "<%= get('input.fromName') %>",
        "sender": "<%= get('input.fromEmail') %>",
        "title": "<%= get('input.subject') %>",
        "htmlBody": "<%- get('input.body') %>",
      }
    },
    {
      "conditions": [
        "toEmails",
      ],
      "type": "emailaddress",
      "_id": "621dfa141b17ad02986c7d7b",
      "data": {
        "keys": [
          "toEmails",
        ],
        "emailAddresses": [],
        "emailTemplate": null,
        "senderName": "<%= get('input.fromName') %>",
        "sender": "<%= get('input.fromEmail') %>",
        "title": "<%= get('input.subject') %>",
        "htmlBody": "<%- get('input.body') %>",
      }
    }
  ],
  "permissionSets": [
    {
      "realms": [
        {
          "_id": "5e82a7cd281d6602b698b483",
          "status": "active",
          "title": "Christian Conventions of WA Inc",
          "color": "#7f12b3",
          "bgColor": "#e7b3ff",
          "created": "2020-03-31T02:15:41.877Z",
          "updated": "2020-03-31T02:15:41.912Z",
          "slug": "christian-conventions-of-wa-inc",
          "_type": "realm",
        }
      ],
      "roles": [
        {
          "_id": "57f4640c461bb7401a858f77",
          "title": "Full Access",
          "_type": "role",
          "realms": [
            "54ebd2ef3a6e88a31bb68640",
          ],
          "status": "active",
          "updated": "2021-02-24T06:19:11.856Z",
          "created": "2016-10-05T02:23:08.750Z",
          "firstLine": "Grants access to Create, Edit, View and Delete almost every type of content in the system",
        }
      ]
    }
  ],
  "title": "Utility: Send Email",
  "tests": [
    {
      "_id": "621dfa141b17ad02986c7d7c",
      "title": "Test object with email address",
      "json": "{ "fromName": "Fred Bloggs", "fromEmail": "samrae@gmail.com", "toEmails": "sam@stalbans.org.au", "subject": "This is the subject", "body": "<h1>Title</h1><p>This is the body</p>" }",
      "testEmail": "sam@stalbans.org.au",
    },
    {
      "_id": "621e1d59b59273001153485d",
      "title": "Test invalid object",
      "json": "{ "fromName": "Fred Bloggs", "fromEmail": "samrae@gmail.com", "subject": "This is the subject", "body": "<p>This is the body</p>" }",
      "testEmail": "sam@stalbans.org.au",
    },
    {
      "_id": "621e1d59b59273001153485e",
      "title": "Test object with contact ID",
      "json": "{ "fromName": "Fred Bloggs", "fromEmail": "samrae@gmail.com", "toContactIDs": ["5e97e0806a9f734dcdc940f1"], "subject": "This is the subject", "body": "<h1>Title</h1><p>This is the body</p>" }",
      "testEmail": "sam@stalbans.org.au",
    },
    {
      "_id": "621e1d59b59273001153485f",
      "title": "Test object with both",
      "json": "{ "fromName": "Fred Bloggs", "fromEmail": "samrae@gmail.com", "toEmails": "sam@stalbans.org.au", "toContactIDs": ["5e97e0806a9f734dcdc940f1"], "subject": "This is the subject", "body": "<h1>Title</h1><p>This is the body</p>" }",
      "testEmail": "sam@stalbans.org.au",
    },
    {
      "_id": "6229fdbdc1d919045444cc89",
      "title": "Another test object",
      "json": "{ "fromName": "Rhianon Rae", "fromEmail": "rhianonrae@gmail.com", "toEmails": "samrae@gmail.com", "toContactIDs": ["5e97e0806a9f734dcdc940f1"], "subject": "Test email", "body": "<h3>Hi!</h3><p>Here is a test email</p>" }",
      "testEmail": "sam@stalbans.org.au",
    }
  ],
  "account": {
    "_id": "5e82a7cd281d6602b698b481",
    "status": "active",
    "title": "CCOWA",
    "countryCode": "AU",
    "timezone": "Australia/Perth",
  },
  "author": {
    "_id": "5eb14f76f4e2c15ffb9bf805",
    "firstName": "Sam",
    "lastName": "Rae",
    "name": "Sam Rae",
    "_type": "user",
  },
  "managedAuthor": {
    "_id": "5eb14f10ff872a540dbbbe16",
    "_type": "persona",
    "firstName": "Sam",
    "title": "Sam Rae",
    "lastName": "Rae",
  },
  "_type": "reaction",
  "updatedBy": "Sam Rae",
  "created": "2022-03-01T10:48:52.632Z",
  "updated": "2022-04-02T05:13:34.468Z",
  "apikey": "$2a$10$fpZijrXH5yzELANgt6/JQOQnngBYcvNBAfhyABwIRQgT/xQWBWb5K",
  "data": {},
  "statDates": {}
}